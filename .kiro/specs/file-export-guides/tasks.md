# 实施计划：文件导出教程系统

## 概述

本实施计划将文件导出教程系统的设计转换为可执行的编码任务。系统包括教程页面、反馈机制、错误引导、欢迎提示和教程索引等功能。所有任务按照增量方式组织，每个任务都建立在前面的任务之上，确保代码逐步集成。

## 任务列表

- [x] 1. 设置基础架构和共享组件
  - 创建目录结构
  - 配置 R2 客户端
  - 创建基础 UI 组件（面包屑、快速参考切换）
  - 设置国际化翻译文件结构
  - _需求：3.1, 3.3, 3.4, 9.1, 9.2_

- [x] 2. 实现教程页面核心组件
  - [x] 2.1 创建 TutorialLayout 组件
    - 实现布局结构和快速参考模式切换
    - 集成面包屑导航
    - 添加 localStorage 偏好保存
    - _需求：1.8, 2.8, 14.1, 14.2, 14.5_

  - [x] 2.2 创建 TutorialStep 组件
    - 实现步骤编号和内容显示
    - 支持快速参考模式过滤
    - _需求：6.2, 14.2, 14.3_

  - [x] 2.3 创建 TutorialImage 组件
    - 实现 R2 图片加载
    - 添加加载状态和错误处理
    - 支持响应式图片
    - _需求：7.1, 9.1, 9.4, 9.6_

  - [ ] 2.4 编写 TutorialLayout 属性测试
    - **属性 2：响应式布局适应**
    - **验证：需求 4.1, 4.2, 4.3, 4.4**

  - [ ] 2.5 编写 TutorialImage 属性测试
    - **属性 3：媒体资源 R2 存储**
    - **属性 4：图片无障碍文本**
    - **验证：需求 7.4, 9.1, 9.2, 9.4**

- [x] 3. 创建 Blackbox 导出教程页面
  - [x] 3.1 实现 /guides/export-blackbox 页面
    - 创建页面路由和元数据
    - 编写教程内容（定义、用途、步骤）
    - 添加 SD 卡和板载闪存导出说明
    - 列出支持的文件格式
    - 添加常见问题排查部分
    - _需求：1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7_

  - [x] 3.2 添加中英文翻译
    - 在 messages/zh.json 添加中文翻译
    - 在 messages/en.json 添加英文翻译
    - _需求：3.1, 3.2_

  - [ ] 3.3 编写页面单元测试
    - 测试页面渲染和内容完整性
    - 测试面包屑导航
    - _需求：1.1, 1.8_


- [x] 4. 创建 CLI Dump 导出教程页面
  - [x] 4.1 实现 /guides/export-cli-dump 页面
    - 创建页面路由和元数据
    - 编写教程内容（定义、连接步骤、CLI 命令）
    - 添加保存文件说明
    - 添加常见问题排查部分
    - _需求：2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7_

  - [x] 4.2 添加中英文翻译
    - 在 messages/zh.json 添加翻译
    - 在 messages/en.json 添加翻译
    - _需求：3.1, 3.2_

  - [ ] 4.3 编写语言切换属性测试
    - **属性 1：语言切换内容更新**
    - **验证：需求 3.1, 3.2, 11.6, 13.7**

- [x] 5. 检查点 - 确保教程页面正常工作
  - ✅ 所有测试通过
  - ✅ 图片路径已修复
  - ✅ 所有图片正常加载
  - ✅ 快速参考模式正常工作

- [ ] 6. 实现反馈系统
  - [ ] 6.1 创建 FeedbackWidget 组件
    - 实现反馈 UI（有帮助/没帮助按钮）
    - 添加评论文本框（仅在"没帮助"时显示）
    - 实现提交逻辑和状态管理
    - 使用 sessionStorage 防止重复提交
    - 显示感谢消息
    - _需求：12.1, 12.2, 12.3, 12.4, 12.6, 12.7_

  - [ ] 6.2 创建反馈 API 路由
    - 实现 /api/feedback POST 端点
    - 添加请求验证
    - 实现错误处理
    - _需求：12.5_

  - [ ] 6.3 实现反馈服务层
    - 创建 feedback-service.ts
    - 实现数据库保存逻辑
    - 定义 Feedback 数据模型
    - _需求：12.5_

  - [ ] 6.4 创建数据库表
    - 编写 tutorial_feedback 表迁移
    - 添加索引
    - _需求：12.5_

  - [ ] 6.5 编写反馈持久化属性测试
    - **属性 7：反馈数据持久化**
    - **验证：需求 12.5**

  - [ ] 6.6 编写反馈 API 单元测试
    - 测试有效反馈提交
    - 测试无效请求处理
    - _需求：12.5_

- [ ] 7. 集成反馈组件到教程页面
  - [ ] 7.1 在 Blackbox 教程页面添加反馈组件
    - _需求：12.1_

  - [ ] 7.2 在 CLI Dump 教程页面添加反馈组件
    - _需求：12.1_

- [ ] 8. 实现错误引导组件
  - [ ] 8.1 创建 ErrorGuidance 组件
    - 实现错误消息显示
    - 添加教程链接（根据文件类型）
    - 使用清晰的视觉样式
    - _需求：10.1, 10.2, 10.3_

  - [ ] 8.2 集成到调参向导的文件上传步骤
    - 修改 StepUpload 组件
    - 在上传失败时显示 ErrorGuidance
    - 添加 Blackbox 和 CLI dump 的教程链接
    - _需求：5.1, 5.2, 10.1, 10.2_

  - [ ] 8.3 编写错误引导属性测试
    - **属性 5：上传失败错误引导**
    - **验证：需求 10.1, 10.2, 10.3**

  - [ ] 8.4 编写错误引导单元测试
    - 测试不同错误类型的显示
    - 测试链接正确性
    - _需求：10.1, 10.2, 10.3_

- [ ] 9. 检查点 - 确保反馈和错误引导正常工作
  - 确保所有测试通过，如有问题请询问用户

- [ ] 10. 实现欢迎提示组件
  - [ ] 10.1 创建 WelcomePrompt 组件
    - 实现模态框 UI
    - 添加文件准备说明
    - 添加教程链接（Blackbox 和 CLI dump）
    - 实现"不再显示"功能
    - 使用 localStorage 记录查看状态
    - _需求：13.1, 13.2, 13.3, 13.4, 13.5_

  - [ ] 10.2 集成到调参向导
    - 在 TuneWizard 组件中添加 WelcomePrompt
    - 检测首次访问
    - _需求：13.1_

  - [ ] 10.3 添加中英文翻译
    - _需求：13.7_

  - [ ] 10.4 编写欢迎提示单元测试
    - 测试首次访问显示
    - 测试 localStorage 持久化
    - 测试"不再显示"功能
    - _需求：13.1, 13.4, 13.5_

- [ ] 11. 实现教程索引页面
  - [ ] 11.1 创建 SearchBar 组件
    - 实现搜索输入框
    - 添加搜索图标
    - _需求：11.5_

  - [ ] 11.2 创建 /guides 索引页面
    - 实现页面布局
    - 列出所有教程（Blackbox、CLI dump）
    - 为每个教程显示标题、描述、缩略图
    - 按类别组织（入门）
    - 集成 SearchBar 组件
    - 添加面包屑导航
    - _需求：11.1, 11.2, 11.3, 11.4, 11.5, 11.7_

  - [ ] 11.3 添加中英文翻译
    - _需求：11.6_

  - [ ] 11.4 编写索引页面属性测试
    - **属性 6：教程索引项完整性**
    - **验证：需求 11.3**

  - [ ] 11.5 编写索引页面单元测试
    - 测试教程列表渲染
    - 测试分类显示
    - _需求：11.1, 11.2, 11.4_

- [ ] 12. 添加导航链接到调参向导
  - [ ] 12.1 在 StepUpload 组件添加教程链接
    - 在 Blackbox 上传区域添加"如何导出"链接
    - 在 CLI dump 上传区域添加"如何导出"链接
    - 设置链接在新标签页打开
    - 使用清晰的视觉样式
    - _需求：5.1, 5.2, 5.3, 5.4_

  - [ ] 12.2 编写导航链接单元测试
    - 测试链接存在性
    - 测试 target="_blank" 属性
    - _需求：5.1, 5.2, 5.3_

- [ ] 13. 检查点 - 确保所有功能集成完成
  - 确保所有测试通过，如有问题请询问用户


- [ ] 14. SEO 和元数据优化
  - [ ] 14.1 为所有教程页面添加 SEO 元数据
    - 添加页面标题
    - 添加 meta description
    - 使用语义化 HTML 标签
    - 添加结构化数据标记（如适用）
    - _需求：8.1, 8.2, 8.3, 8.4_

  - [ ] 14.2 编写 SEO 元数据单元测试
    - 测试 title 和 description 存在
    - 测试语义化标签使用
    - _需求：8.1, 8.2, 8.3_

- [ ] 15. R2 媒体资源准备
  - [ ] 15.1 上传教程截图到 R2
    - 上传 Blackbox 教程截图（step1-3, troubleshooting）
    - 上传 CLI dump 教程截图（step1-3, troubleshooting）
    - 上传缩略图
    - 验证 URL 可访问
    - _需求：9.1, 9.2, 9.4_

  - [ ] 15.2 配置 R2 缓存策略
    - 设置适当的 Cache-Control 头
    - _需求：9.5_

- [ ] 16. 端到端测试
  - [ ] 16.1 编写教程页面 E2E 测试
    - 测试 Blackbox 教程页面访问和内容
    - 测试 CLI dump 教程页面访问和内容
    - 测试快速参考模式切换
    - 测试反馈提交流程
    - _需求：1.1, 2.1, 14.1, 14.2, 12.1_

  - [ ] 16.2 编写教程索引 E2E 测试
    - 测试索引页面访问
    - 测试教程列表显示
    - 测试导航到具体教程
    - _需求：11.1, 11.2_

  - [ ] 16.3 编写调参向导集成 E2E 测试
    - 测试欢迎提示显示
    - 测试上传失败错误引导
    - 测试教程链接点击
    - _需求：5.1, 5.2, 10.1, 13.1_

- [ ] 17. 最终检查点 - 完整系统验证
  - 确保所有测试通过
  - 验证所有功能正常工作
  - 检查国际化完整性
  - 验证响应式设计
  - 如有问题请询问用户

## 注意事项

- 每个任务都引用了具体的需求以确保可追溯性
- 检查点确保增量验证
- 属性测试验证通用正确性属性
- 单元测试验证特定示例和边缘情况
- 端到端测试验证完整的用户流程
- 所有测试任务都是必需的，确保从一开始就进行全面测试
