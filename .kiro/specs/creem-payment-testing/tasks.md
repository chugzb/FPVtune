# 实施计划：Creem 支付流程测试

## 概述

本计划描述了 FPVTune 网站 Creem 支付流程端到端测试的执行步骤。使用 Playwright MCP 进行浏览器自动化测试，验证从文件上传到邮件接收的完整支付流程。计划执行 10 轮基础测试，如有必要可扩展到 30 轮以确保系统稳定性。

## 任务

- [x] 1. 测试环境准备和验证
  - [x] 1.1 验证测试文件存在
    - 检查 `public/test bll txt/` 目录下的 Blackbox 文件和 CLI Dump 文件
    - 确认文件可读取
    - _需求: 1.3, 1.5_
  - [x] 1.2 验证网站可访问
    - 使用 Playwright 访问 https://fpvtune.com/zh/tune
    - 确认页面正常加载
    - 截图保存页面状态
    - _需求: 1.1, 2.1_

- [x] 2. 执行测试轮次 1-3
  - [x] 2.1 执行轮次 1：桨洗 + 锁定感 + 花飞 + 5"
    - 访问 /zh/tune 页面
    - 上传 Blackbox 文件和 CLI Dump 文件
    - 选择问题类型：桨洗
    - 选择目标：锁定感
    - 选择风格：花飞
    - 选择机架：5"
    - 填写邮箱：ningainshop@gmail.com
    - 填写姓名：Test Round 1
    - 提交表单并完成 Creem 支付（测试卡 4242）
    - 等待 Webhook 自动处理（最长 60 秒）
    - 验证结果页面显示订单号和 AI 分析
    - 记录测试结果
    - _需求: 2.2, 2.3, 3.1-3.6, 4.1-4.4, 5.1-5.4, 6.1-6.5, 8.1-8.4, 9.1_
  - [x] 2.2 执行轮次 2：振动 + 响应速度 + 竞速 + 5"
    - 同上流程，使用轮次 2 参数
    - _需求: 9.1_
  - [x] 2.3 执行轮次 3：电机过热 + 平滑 + 航拍 + 7"
    - 同上流程，使用轮次 3 参数
    - _需求: 9.1_

- [x] 3. 检查点 - 验证前 3 轮测试结果
  - 确认所有测试通过，如有问题暂停并修复
  - 登录 Gmail 验证是否收到 3 封邮件
  - 验证邮件内容包含订单号和 AI 分析摘要
  - 验证邮件中的链接可正常访问
  - _需求: 7.1-7.9, 11.1-11.5_

- [x] 4. 执行测试轮次 4-6
  - [x] 4.1 执行轮次 4：弹跳 + 锁定感 + 竞速 + 5"
    - 同上流程，使用轮次 4 参数
    - _需求: 9.1_
  - [x] 4.2 执行轮次 5：桨洗 + 响应速度 + 花飞 + 5"
    - 同上流程，使用轮次 5 参数
    - _需求: 9.1_
  - [x] 4.3 执行轮次 6：振动 + 平滑 + 航拍 + 3"
    - 同上流程，使用轮次 6 参数
    - _需求: 9.1_

- [x] 5. 检查点 - 验证轮次 4-6 测试结果
  - 确认所有测试通过，如有问题暂停并修复
  - 登录 Gmail 验证是否收到对应邮件
  - 验证邮件内容完整性
  - _需求: 7.1-7.9, 11.1-11.5_

- [x] 6. 执行测试轮次 7-10
  - [x] 6.1 执行轮次 7：电机过热 + 锁定感 + 花飞 + 5"
    - 同上流程，使用轮次 7 参数
    - _需求: 9.1_
  - [x] 6.2 执行轮次 8：弹跳 + 响应速度 + 竞速 + 5"
    - 同上流程，使用轮次 8 参数
    - _需求: 9.1_
  - [x] 6.3 执行轮次 9：桨洗 + 平滑 + 航拍 + 7"
    - 同上流程，使用轮次 9 参数
    - _需求: 9.1_
  - [x] 6.4 执行轮次 10：振动 + 锁定感 + 花飞 + 5"
    - 同上流程，使用轮次 10 参数
    - _需求: 9.1_

- [x] 7. 检查点 - 验证轮次 7-10 测试结果
  - 确认所有测试通过，如有问题暂停并修复
  - 登录 Gmail 验证是否收到对应邮件
  - 验证邮件内容完整性
  - _需求: 7.1-7.9, 11.1-11.5_

- [ ] 8. 扩展测试轮次 11-20（如有必要）
  - [ ] 8.1 执行轮次 11-15
    - 重复使用轮次 1-5 的参数组合
    - 姓名使用 Test Round 11-15
    - _需求: 9.1_
  - [ ] 8.2 执行轮次 16-20
    - 重复使用轮次 6-10 的参数组合
    - 姓名使用 Test Round 16-20
    - _需求: 9.1_
  - [ ] 8.3 检查点 - 验证轮次 11-20 测试结果
    - 确认所有测试通过
    - 验证 Gmail 邮件
    - _需求: 7.1-7.9, 11.1-11.5_

- [ ] 9. 扩展测试轮次 21-30（如有必要）
  - [ ] 9.1 执行轮次 21-25
    - 重复使用轮次 1-5 的参数组合
    - 姓名使用 Test Round 21-25
    - _需求: 9.1_
  - [ ] 9.2 执行轮次 26-30
    - 重复使用轮次 6-10 的参数组合
    - 姓名使用 Test Round 26-30
    - _需求: 9.1_
  - [ ] 9.3 检查点 - 验证轮次 21-30 测试结果
    - 确认所有测试通过
    - 验证 Gmail 邮件
    - _需求: 7.1-7.9, 11.1-11.5_

- [x] 10. 生成测试报告
  - [x] 10.1 汇总测试结果
    - 统计通过/失败轮次数
    - 记录每轮测试的订单号、状态和耗时
    - _需求: 10.1, 10.2_
  - [x] 10.2 记录发现的问题
    - 整理测试过程中发现的问题
    - 记录问题的严重程度和修复状态
    - _需求: 10.3, 11.6, 11.7_
  - [x] 10.3 更新测试计划文件
    - 更新 screenshots/creem-payment-test-plan.md 中的测试结果表格
    - 填写优化建议
    - _需求: 10.2, 10.3_

## 注意事项

- 每轮测试必须等待 Webhook 自动处理完成，不能手动触发
- 如果 Webhook 未能在 60 秒内自动触发，标记为失败并记录问题
- 发现问题时暂停测试，修复后从当前轮次重新开始
- 所有测试结果需要在 Gmail 中验证邮件内容
- 测试完成后更新测试计划文件中的结果记录
- 基础测试为 10 轮，如需更多验证可扩展到 30 轮
